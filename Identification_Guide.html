<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Identification Guide - Mushroom Guide UK</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body class="dark-mode">

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg" id="mainNavbar">
    <div class="container">
      <a class="navbar-brand" href="Home_page.html">Mushroom Guide UK</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto align-items-center">
          <li class="nav-item"><a class="nav-link" href="Home_page.html">Home</a></li>
          <li class="nav-item"><a class="nav-link active" href="Identification_Guide.html">Identification Guide</a></li>
          <li class="nav-item"><a class="nav-link" href="Safety_Tips.html">Safety Tips</a></li>
          <li class="nav-item"><a class="nav-link" href="Quiz.html">Quizzes</a></li>
          <li class="nav-item"><a class="nav-link" href="Interactive_Map.html">Foraging Map</a></li>
          <li class="nav-item ms-3">
            <button id="modeToggle" class="btn toggle-btn">Light Mode</button>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Identification Guide (replaced section) -->
  <section class="container py-5">
    <h2 class="mb-4">Identification Guide</h2>

    <!-- Controls -->
    <div class="row g-3 align-items-end mb-4">
      <div class="col-md-7">
        <label class="form-label" for="searchInput">Search</label>
        <input id="searchInput" type="text" class="form-control" placeholder="Search by name, habitat, description, side effects…">
      </div>
      <div class="col-md-3">
        <label class="form-label" for="edibilityFilter">Edibility</label>
        <select id="edibilityFilter" class="form-select">
          <option value="all" selected>All</option>
          <option value="edible">Edible</option>
          <option value="poisonous">Poisonous</option>
        </select>
      </div>
      <div class="col-md-2 d-grid">
        <button id="clearFilters" class="btn btn-outline-secondary">Clear</button>
      </div>
    </div>

    <!-- Results -->
    <div id="resultsCount" class="mb-2 small text-muted"></div>
    <div id="mushroomGrid" class="row g-4"></div>

    <p class="mt-4 mb-0 small">
      <strong>Safety note:</strong> This guide is educational. Many edible species have toxic lookalikes.
      Always confirm with multiple reliable sources and never eat a wild mushroom unless you’re 100% sure of the ID.
    </p>
  </section>

  <footer class="text-center py-3">
    &copy; 2025 Interactive Mushroom Foraging Guide UK. All rights reserved.
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const toggleBtn = document.getElementById('modeToggle');
  
    // Apply saved theme on load
    (function () {
      try {
        const saved = localStorage.getItem('theme'); // 'dark' | 'light' | null
        if (saved === 'light') {
          document.body.classList.remove('dark-mode');
          document.body.classList.add('light-mode');
          toggleBtn.textContent = 'Dark Mode';
        } else {
          // default dark
          toggleBtn.textContent = 'Light Mode';
        }
      } catch (e) {}
    })();
  
    // Existing toggle + persist
    toggleBtn.addEventListener('click', () => {
      if (document.body.classList.contains('dark-mode')) {
        document.body.classList.replace('dark-mode', 'light-mode');
        toggleBtn.textContent = 'Dark Mode';
        localStorage.setItem('theme', 'light');   // persist
      } else {
        document.body.classList.replace('light-mode', 'dark-mode');
        toggleBtn.textContent = 'Light Mode';
        localStorage.setItem('theme', 'dark');    // persist
      }
    });
  </script>

  <!-- Mini database + renderer -->
  <script>
    // Mini “database” (20 UK species)
    const MUSHROOMS = [
      // ==== Edible (10) ====
      {
        name: "Chanterelle",
        latin: "Cantharellus cibarius",
        edible: true,
        sideEffects: "Generally safe; rare GI upset if undercooked.",
        found: "Deciduous & coniferous woods; mossy banks; summer–autumn.",
        img: "https://images.unsplash.com/photo-1590089203955-53c1890409c5?auto=format&fit=crop&w=800&q=60",
        description: "Golden, wavy ridges (false gills), fruity apricot aroma; often in groups.",
        aka: ["Girolle"]
      },
      {
        name: "Porcini",
        latin: "Boletus edulis",
        edible: true,
        sideEffects: "Rich but heavy; avoid very old specimens.",
        found: "With spruce, pine, birch, beech; late summer–autumn.",
        img: "https://images.unsplash.com/photo-1605881887838-10cbe26e72e6?auto=format&fit=crop&w=800&q=60",
        description: "Bulky bolete, white pores turning yellow to green; thick white stalk with netting.",
        aka: ["Cep", "Penny Bun"]
      },
      {
        name: "Hedgehog Mushroom",
        latin: "Hydnum repandum",
        edible: true,
        sideEffects: "Occasionally peppery; trim darkened spines.",
        found: "Deciduous & conifer woods; late summer–autumn.",
        img: "https://images.unsplash.com/photo-1603131217924-9a6a2c1f24ef?auto=format&fit=crop&w=800&q=60",
        description: "Spines (teeth) under the cap instead of gills; pale buff to orange.",
        aka: ["Wood Hedgehog"]
      },
      {
        name: "Oyster Mushroom",
        latin: "Pleurotus ostreatus",
        edible: true,
        sideEffects: "Can cause mild GI upset in some; cook well.",
        found: "On dead hardwood; parks & woodlands; autumn–winter.",
        img: "https://images.unsplash.com/photo-1603791440384-56cd371ee9a7?auto=format&fit=crop&w=800&q=60",
        description: "Fan-shaped caps in shelves; decurrent gills; lilac-grey to beige.",
        aka: []
      },
      {
        name: "Chicken of the Woods",
        latin: "Laetiporus sulphureus",
        edible: true,
        sideEffects: "Some react (esp. from yew/conifer hosts). Try small amounts first; cook thoroughly.",
        found: "On oak, yew, cherry; late spring–autumn.",
        img: "https://images.unsplash.com/photo-1603386826421-90e487c0d1f5?auto=format&fit=crop&w=800&q=60",
        description: "Bright sulphur-yellow/orange shelves; meaty texture.",
        aka: []
      },
      {
        name: "Wood Blewit",
        latin: "Lepista nuda",
        edible: true,
        sideEffects: "Must be cooked; raw can cause GI upset. Some individuals sensitive.",
        found: "Leaf litter, compost, edges; autumn–winter.",
        img: "https://images.unsplash.com/photo-1631979925152-2e537454b6d7?auto=format&fit=crop&w=800&q=60",
        description: "Lilac tones to cap & gills when fresh; stout pale stalk.",
        aka: ["Blue-leg"]
      },
      {
        name: "Field Mushroom",
        latin: "Agaricus campestris",
        edible: true,
        sideEffects: "Avoid yellow-staining, phenolic-smelling lookalikes (A. xanthodermus).",
        found: "Pasture & lawns; late summer–autumn.",
        img: "https://images.unsplash.com/photo-1502741126161-b048400d0857?auto=format&fit=crop&w=800&q=60",
        description: "Pink gills maturing chocolate-brown; ring present; no volva.",
        aka: []
      },
      {
        name: "St George’s Mushroom",
        latin: "Calocybe gambosa",
        edible: true,
        sideEffects: "Rich; a few report GI sensitivity.",
        found: "Grassy places, hedgerows; spring (around St George’s Day).",
        img: "https://images.unsplash.com/photo-1626178797720-0a98fc2a82b2?auto=format&fit=crop&w=800&q=60",
        description: "Creamy, thick flesh; mealy (cucumber) smell; spring fruiter.",
        aka: []
      },
      {
        name: "Fairy Ring Champignon",
        latin: "Marasmius oreades",
        edible: true,
        sideEffects: "Delicate; take care not to mix with toxic funnels.",
        found: "Lawns, meadows; spring–autumn; forms rings.",
        img: "https://images.unsplash.com/photo-1611955167818-9a4f75b1218f?auto=format&fit=crop&w=800&q=60",
        description: "Small buff caps; widely spaced gills; tough, wiry stem.",
        aka: []
      },
      {
        name: "Giant Puffball",
        latin: "Calvatia gigantea",
        edible: true,
        sideEffects: "Edible only when flesh is pure white; discard once yellowing.",
        found: "Pasture, field edges; late summer–autumn.",
        img: "https://images.unsplash.com/photo-1595943027138-7977b7a7fd1a?auto=format&fit=crop&w=800&q=60",
        description: "Huge white ball; no visible cap/gills; sliceable like tofu.",
        aka: []
      },

      // ==== Poisonous (10) ====
      {
        name: "Death Cap",
        latin: "Amanita phalloides",
        edible: false,
        sideEffects: "Deadly (amatoxins): delayed GI, liver/kidney failure.",
        found: "With oak, beech; summer–autumn; often in parks.",
        img: "https://images.unsplash.com/photo-1630931502970-7ad7d8b91b9e?auto=format&fit=crop&w=800&q=60",
        description: "Olive cap, white gills; ring & white volva at bulbous base.",
        aka: []
      },
      {
        name: "Destroying Angel",
        latin: "Amanita virosa",
        edible: false,
        sideEffects: "Deadly (amatoxins).",
        found: "Conifer/birch woods; summer–autumn.",
        img: "https://images.unsplash.com/photo-1606851091845-079f8f223603?auto=format&fit=crop&w=800&q=60",
        description: "Pure white cap, gills & stem; ring and volva present.",
        aka: []
      },
      {
        name: "Fly Agaric",
        latin: "Amanita muscaria",
        edible: false,
        sideEffects: "Toxic: nausea, delirium; neuroactive compounds.",
        found: "Birch & pine; late summer–autumn.",
        img: "https://images.unsplash.com/photo-1508433957232-3107f1a5d81b?auto=format&fit=crop&w=800&q=60",
        description: "Iconic red cap with white warts; white gills; ring & volva.",
        aka: []
      },
      {
        name: "Panther Cap",
        latin: "Amanita pantherina",
        edible: false,
        sideEffects: "Toxic: atropine-like; delirium, nausea.",
        found: "Mixed woods; summer–autumn.",
        img: "https://images.unsplash.com/photo-1599571424776-1500f0b2b44c?auto=format&fit=crop&w=800&q=60",
        description: "Brown cap with neat white warts; white gills; ring & volva.",
        aka: []
      },
      {
        name: "Funeral Bell (Deadly Galerina)",
        latin: "Galerina marginata",
        edible: false,
        sideEffects: "Deadly (amatoxins).",
        found: "On rotting wood; year-round in clumps.",
        img: "https://images.unsplash.com/photo-1607443870137-51f1f90c962f?auto=format&fit=crop&w=800&q=60",
        description: "Small brown caps; rusty gills; ring sometimes present.",
        aka: ["Deadly Galerina"]
      },
      {
        name: "Fool’s Funnel",
        latin: "Clitocybe rivulosa",
        edible: false,
        sideEffects: "Toxic (muscarine): sweating, salivation, GI upset.",
        found: "Lawns, parks, dunes; summer–winter.",
        img: "https://images.unsplash.com/photo-1593986906221-d6d0b23b7b2d?auto=format&fit=crop&w=800&q=60",
        description: "Whitish funnel cap; crowded decurrent gills; forms rings.",
        aka: ["Ivory Funnel"]
      },
      {
        name: "Deadly Webcap",
        latin: "Cortinarius rubellus",
        edible: false,
        sideEffects: "Deadly (orellanine): kidney failure, delayed onset.",
        found: "Conifers, heaths; late summer–autumn.",
        img: "https://images.unsplash.com/photo-1601999134656-4f53d2e5f9d4?auto=format&fit=crop&w=800&q=60",
        description: "Rusty-orange cap; cobwebby cortina; rusty-brown spores.",
        aka: []
      },
      {
        name: "Deadly Fibrecap",
        latin: "Inosperma erubescens",
        edible: false,
        sideEffects: "Deadly (muscarine).",
        found: "Calcareous woods, parks; summer–autumn.",
        img: "https://images.unsplash.com/photo-1604878394223-01c87d2f1bf7?auto=format&fit=crop&w=800&q=60",
        description: "Pale cap that reddens when bruised; fibrillose stem.",
        aka: ["Inocybe patouillardii"]
      },
      {
        name: "Sulphur Tuft",
        latin: "Hypholoma fasciculare",
        edible: false,
        sideEffects: "Poisonous: bitter taste, GI upset.",
        found: "On stumps/logs in dense clusters; most of the year.",
        img: "https://images.unsplash.com/photo-1630600033239-9e88d885f4d3?auto=format&fit=crop&w=800&q=60",
        description: "Sulphur-yellow caps with darker centres; greenish gills with age.",
        aka: []
      },
      {
        name: "Yellow Stainer",
        latin: "Agaricus xanthodermus",
        edible: false,
        sideEffects: "Causes GI upset; phenolic/ink smell when crushed.",
        found: "Parks, gardens; summer–autumn.",
        img: "https://images.unsplash.com/photo-1519680772-8b3d9a96946b?auto=format&fit=crop&w=800&q=60",
        description: "Looks like field mushroom but turns chrome yellow at base on bruising.",
        aka: []
      }
    ];

    // ---------------
    // Rendering logic
    // ---------------
    const grid = document.getElementById('mushroomGrid');
    const searchInput = document.getElementById('searchInput');
    const edibilityFilter = document.getElementById('edibilityFilter');
    const clearBtn = document.getElementById('clearFilters');
    const countEl = document.getElementById('resultsCount');

    function badge(edible) {
      const cls = edible ? 'bg-success' : 'bg-danger';
      return `<span class="badge ${cls}">${edible ? 'Edible' : 'Poisonous'}</span>`;
    }

    function cardTemplate(m) {
      const extra = m.aka && m.aka.length ? ` · <em>${m.aka.join(', ')}</em>` : '';
      return `
        <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6">
          <div class="card feature-card h-100">
            <img src="${m.img}" class="card-img-top" alt="${m.name}">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <h5 class="card-title mb-0">${m.name}</h5>
                ${badge(m.edible)}
              </div>
              <p class="mb-1"><small><strong><em>${m.latin}</em>${extra}</strong></small></p>
              <p class="mb-2"><strong>Where:</strong> ${m.found}</p>
              <p class="mb-2"><strong>Description:</strong> ${m.description}</p>
              <p class="mb-0"><strong>Side effects:</strong> ${m.sideEffects}</p>
            </div>
          </div>
        </div>
      `;
    }

    function applyFilters() {
      const q = (searchInput.value || '').trim().toLowerCase();
      const mode = edibilityFilter.value; // all | edible | poisonous

      let list = MUSHROOMS.slice();

      if (mode !== 'all') {
        const wantEdible = (mode === 'edible');
        list = list.filter(x => x.edible === wantEdible);
      }

      if (q) {
        list = list.filter(x => {
          const hay = [
            x.name, x.latin,
            ...(x.aka || []),
            x.found, x.description, x.sideEffects,
            x.edible ? 'edible' : 'poisonous'
          ].join(' ').toLowerCase();
          return hay.includes(q);
        });
      }

      grid.innerHTML = list.map(cardTemplate).join('');
      countEl.textContent = `${list.length} result${list.length === 1 ? '' : 's'}`;
    }

    // Events
    searchInput.addEventListener('input', applyFilters);
    edibilityFilter.addEventListener('change', applyFilters);
    clearBtn.addEventListener('click', () => {
      searchInput.value = '';
      edibilityFilter.value = 'all';
      applyFilters();
    });

    // First render
    applyFilters();
  </script>  
</body>
</html>
